{% extends "base.html" %}

{% block hightitle %}
	Задания команды {{team.name}}
{% endblock %}

{% block title %}
	Задания команды {{team.name}}
{% endblock %}

{% block redirect %}
	"/"
{% endblock %}

{% block name_redirect_page %}
	Очки, набранные командами
{% endblock %}

{% block content %}
	<table border=5 cellpadding=0 cellspacing=1 id="hor-zebra>
		<thead>
			<tr class="header">
			{% for c in categories %}
            <th class="tasks">{{c.name}}</th>
			{% endfor %}
			</tr>
		</thead>
		<tbody>		
			<tr class="tasks">
				{% for d in data%}
				<td>{{d.cat.name}}</td>
				{% endfor %}
			</tr>		
			
			<tr>
				{% for d in data%}
					<td>
					<div class="grid">
						{% for task in d.tasks %}
						<div class="task">
							{% if access %}
								<a href="#" onclick="checktask({{task.id}})">{{task}}</a>
							{% else %}
								{{task}}
							{% endif %}
						</div>							
						{% endfor %}
					</div>	
					</td>
				{% endfor %}
			</tr>
		</tbody>
	</table>

	<!--
	<div id="overlay" class="overlayclass">
		<div class="notifblock">
			<div id="content"></div>
			<div id="farm" class="frm">
				<form>
					<input type="hidden" value="" id="task_id">
					<input type="text" id="flag">
					<input type="button" onclick="sendflag($('#overlay #task_id').val(), $('#overlay #flag').val())" value="Отправить">
				</form>
			</div>
			<input type="button" value="X" onclick="closeOverlay()">
		</div>
	</div> -->
{% endblock %}
<!--
{% block scripts %}
<script>
function checktask(task_id)
{
	$.ajax({
		url: '/tsk',
		data: {'task_id' : task_id }
		})
  		.done(function(data) { 
  			$('#overlay #content').empty();
  			$('#overlay #content').append(data.task);
  			$('#overlay #task_id').val(task_id);
  			$('#overlay #flag').val("");
  			$.ajax({
				url: '/chk',
				data: {'task_id' : task_id, 'flag' : 'null' }
				})
  				.done(function(data) {
  					if(!data.status)
  						$('#overlay #farm').addClass('visible');
  					else
  						$('#overlay #farm').removeClass('visible');
  					$('#overlay').addClass('visible');
  				})
    			.fail(function() { 
    				alert("error"); 
    			});
  			})
    	.fail(function() { 
    		$('#overlay').removeClass('visible');
    		alert("error");
    		});
}

function sendflag(task_id, flag)
{
	$.ajax({
		url: '/chk',
		data: {'task_id' : task_id, 'flag' : flag }
		})
  		.done(function(data) { 
  			$('#overlay #flag').val(data.status);
  			})
    	.fail(function() { 
    		alert("error"); 
    		});
}

function closeOverlay()
{
	$('#overlay').removeClass('visible');
	$('#overlay #flag').val("");
}
</script>
{% endblock %} 
-->